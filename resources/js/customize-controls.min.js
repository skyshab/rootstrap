"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return i}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Rootstrap=function(){function e(){if(_classCallCheck(this,e),this.api=wp.customize,!this.api)return!1;this.devices=rootstrapData.devices,this.initializeNavLinks(),this.initializeDeviceLinks(),this.bindDevices()}return _createClass(e,[{key:"getDeviceList",value:function(){return Object.keys(this.devices)}},{key:"getDevice",value:function(e){for(var t=!1,i=Object.entries(this.devices),n=0;n<i.length;n++){var r=_slicedToArray(i[n],2),a=r[0],o=r[1];if(a&&o){var c=parseInt(o.min,10)?parseInt(o.min,10):0,s=parseInt(o.max,10)?parseInt(o.max,10):9999;return e>=c&&e<=s&&(t=a),!1}}return t}},{key:"getCurrentDevice",value:function(){return getDevice(this.getPreviewWidth())}},{key:"getPreviewWidth",value:function(){var e=document.querySelector("#customize-preview iframe");return(e.contentDocument?e.contentDocument:e.contentWindow.document).body.offsetWidth()}},{key:"bindDevices",value:function(){var e=this.api,t=this.getDeviceList();e.section.each(function(i){var n=i.params.type;t.forEach(function(t){n&&n==="rootstrap-device--".concat(t)&&i.expanded.bind(function(){e.previewedDevice.set(t)})})})}},{key:"initializeNavLinks",value:function(){var e=this.api;document.querySelectorAll(".rootstrap-nav-link").forEach(function(t){var i=t.dataset.section;t.addEventListener("click",function(t){e.section(i)&&e.section(i).focus()})})}},{key:"initializeDeviceLinks",value:function(){var e=this.api;document.querySelectorAll(".rootstrap-nav-link").forEach(function(t){var i=t.dataset.device;t.addEventListener("click",function(t){i&&e.previewedDevice.set(i)})})}}]),e}();wp.customize.bind("ready",function(){new Rootstrap});