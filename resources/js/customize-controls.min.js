"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Rootstrap=function(){function e(){if(_classCallCheck(this,e),this.api=wp.customize,!this.api)return!1;this.devices=rootstrapData.devices,this.initializeNavLinks(),this.bindDevices()}return _createClass(e,[{key:"getDeviceList",value:function(){return Object.keys(this.devices)}},{key:"getDevice",value:function(e){for(var t=!1,n=Object.entries(this.devices),i=0;i<n.length;i++){var r=_slicedToArray(n[i],2),a=r[0],o=r[1];if(a&&o){var c=parseInt(o.min,10)?parseInt(o.min,10):0,s=parseInt(o.max,10)?parseInt(o.max,10):9999;return e>=c&&e<=s&&(t=a),!1}}return t}},{key:"getCurrentDevice",value:function(){return getDevice(this.getPreviewWidth())}},{key:"getPreviewWidth",value:function(){var e=document.querySelector("#customize-preview iframe");return(e.contentDocument?e.contentDocument:e.contentWindow.document).body.offsetWidth()}},{key:"bindDevices",value:function(){var e=this.api,t=this.getDeviceList();e.section.each(function(n){var i=n.params.type;t.forEach(function(t){i&&i==="rootstrap-device--".concat(t)&&n.expanded.bind(function(){e.previewedDevice.set(t)})})})}},{key:"initializeNavLinks",value:function(){var e=this.api;document.querySelectorAll(".rootstrap-nav-link").forEach(function(t){var n=t.dataset.section;t.addEventListener("click",function(t){e.section(n)&&e.section(n).focus()})})}}]),e}();wp.customize.bind("ready",function(){new Rootstrap});