"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Rootstrap=function(){function e(){if(_classCallCheck(this,e),this.api=wp.customize,!this.api)return!1;this.devices=rootstrapData.devices,this.init()}return _createClass(e,[{key:"init",value:function(){this.initializeNavLink(),this.setDeviceData()}},{key:"getDeviceList",value:function(){return Object.keys(this.devices)}},{key:"getDevice",value:function(e){for(var t=!1,r=Object.entries(this.devices),n=0;n<r.length;n++){var i=_slicedToArray(r[n],2),a=i[0],o=i[1];if(a&&o){var c=parseInt(o.min,10)?parseInt(o.min,10):0,s=parseInt(o.max,10)?parseInt(o.max,10):9999;return e>=c&&e<=s&&(t=a),!1}}return t}},{key:"getCurrentDevice",value:function(){return getDevice(this.getPreviewWidth())}},{key:"getPreviewWidth",value:function(){var e=document.querySelector("#customize-preview iframe");return(e.contentDocument?e.contentDocument:e.contentWindow.document).body.offsetWidth()}},{key:"setDeviceData",value:function(){var e=this.api;document.querySelectorAll(".accordion-section-title").forEach(function(t){t.addEventListener("click",function(t){var r=t.target.parentElement.classList,n=!0,i=!1,a=void 0;try{for(var o,c=r[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;return-1!==s.indexOf("rootstrap-device--")&&e.previewedDevice.set(s.replace("control-section-rootstrap-device--","")),!1}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}})})}},{key:"initializeNavLink",value:function(){var e=this.api;document.querySelectorAll(".rootstrap-nav-link").forEach(function(t){var r=t.dataset.section,n=t.dataset.device;t.addEventListener("click",function(t){if(e.section(r)&&e.section(r).activate(),e.section(r).focus(),n)e.previewedDevice.set(n);else var i=e.section(r).params.type;i&&-1!==i.indexOf("rootstrap-device--")&&e.previewedDevice.set(i.replace("rootstrap-device--",""))})})}}]),e}();document.addEventListener("DOMContentLoaded",function(){new Rootstrap});